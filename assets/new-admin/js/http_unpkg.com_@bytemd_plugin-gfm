(function(W,_){typeof exports=="object"&&typeof module!="undefined"?module.exports=_():typeof define=="function"&&define.amd?define(_):(W=typeof globalThis!="undefined"?globalThis:W||self,W.bytemdPluginGfm=_())})(this,function(){"use strict";const Ut={strike:"Strikethrough",strikeText:"text",table:"Table",tableHeading:"Heading",task:"Task list",taskText:"todo"};var Nt={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function Vt(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function $t(t,n,e){var i=typeof n.fill=="string"?[n.fill]:n.fill||[],u=[],r=n.theme||e.theme;switch(r){case"outline":u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push("none"),u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push("none");break;case"filled":u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push("#FFF"),u.push("#FFF");break;case"two-tone":u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push(typeof i[1]=="string"?i[1]:e.colors.twoTone.twoTone),u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push(typeof i[1]=="string"?i[1]:e.colors.twoTone.twoTone);break;case"multi-color":u.push(typeof i[0]=="string"?i[0]:"currentColor"),u.push(typeof i[1]=="string"?i[1]:e.colors.multiColor.outFillColor),u.push(typeof i[2]=="string"?i[2]:e.colors.multiColor.innerStrokeColor),u.push(typeof i[3]=="string"?i[3]:e.colors.multiColor.innerFillColor);break}return{size:n.size||e.size,strokeWidth:n.strokeWidth||e.strokeWidth,strokeLinecap:n.strokeLinecap||e.strokeLinecap,strokeLinejoin:n.strokeLinejoin||e.strokeLinejoin,colors:u,id:t}}var qt=Nt;function Gt(){return qt}function q(t,n){return function(e){var i=Gt(),u=$t(Vt(),e,i);return n(u)}}const Zt=q("check-correct",function(t){return'<?xml version="1.0" encoding="UTF-8"?><svg width="'+t.size+'" height="'+t.size+'" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#'+t.id+'353e4f38)"><path d="M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/><path d="M16 20L26 28L41 7" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/></g><defs><clipPath id="'+t.id+'353e4f38"><rect width="48" height="48" fill="'+t.colors[2]+'"/></clipPath></defs></svg>'}),Kt=q("insert-table",function(t){return'<?xml version="1.0" encoding="UTF-8"?><svg width="'+t.size+'" height="'+t.size+'" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.3 6H8.7C7.20883 6 6 7.20883 6 8.7V39.3C6 40.7912 7.20883 42 8.7 42H39.3C40.7912 42 42 40.7912 42 39.3V8.7C42 7.20883 40.7912 6 39.3 6Z" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'"/><path d="M18 6V42" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'"/><path d="M30 6V42" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'"/><path d="M6 18H42" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'"/><path d="M6 30H42" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'"/></svg>'}),Xt=q("strikethrough",function(t){return'<?xml version="1.0" encoding="UTF-8"?><svg width="'+t.size+'" height="'+t.size+'" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 24H43" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/><path d="M24 24C40 30 34 44 24 44C13.9999 44 12 36 12 36" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/><path d="M35.9999 12C35.9999 12 33 4 23.9999 4C14.9999 4 11.4359 11.5995 15.6096 18" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/><path d="M12 36C12 36 15.9999 44 24 44C32 44 36.564 36.4005 32.3903 30" stroke="'+t.colors[0]+'" stroke-width="'+t.strokeWidth+'" stroke-linecap="'+t.strokeLinecap+'" stroke-linejoin="'+t.strokeLinejoin+'"/></svg>'});function O(t,n,e,i){const u=t.length;let r=0,l;if(n<0?n=-n>u?0:u+n:n=n>u?u:n,e=e>0?e:0,i.length<1e4)l=Array.from(i),l.unshift(n,e),[].splice.apply(t,l);else for(e&&[].splice.apply(t,[n,e]);r<i.length;)l=i.slice(r,r+1e4),l.unshift(n,0),[].splice.apply(t,l),r+=1e4,n+=1e4}const lt={}.hasOwnProperty;function Yt(t){const n={};let e=-1;for(;++e<t.length;)Jt(n,t[e]);return n}function Jt(t,n){let e;for(e in n){const u=(lt.call(t,e)?t[e]:void 0)||(t[e]={}),r=n[e];let l;for(l in r){lt.call(u,l)||(u[l]=[]);const a=r[l];Qt(u[l],Array.isArray(a)?a:a?[a]:[])}}}function Qt(t,n){let e=-1;const i=[];for(;++e<n.length;)(n[e].add==="after"?t:i).push(n[e]);O(t,0,0,i)}const te=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ut=P(/[A-Za-z]/),ee=P(/\d/),ot=P(/[\dA-Za-z]/);function at(t){return t!==null&&(t<32||t===127)}function D(t){return t!==null&&(t<0||t===32)}function y(t){return t!==null&&t<-2}function E(t){return t===-2||t===-1||t===32}const v=P(/\s/),U=P(te);function P(t){return n;function n(e){return e!==null&&t.test(String.fromCharCode(e))}}const ne={tokenize:oe,partial:!0},st={tokenize:ae,partial:!0},ct={tokenize:se,partial:!0},j={tokenize:he,partial:!0},ht={tokenize:ce,partial:!0},ft={tokenize:le,previous:pt},gt={tokenize:ue,previous:Z},L={tokenize:re,previous:bt},A={},ie={text:A};let z=48;for(;z<123;)A[z]=L,z++,z===58?z=65:z===91&&(z=97);A[43]=L,A[45]=L,A[46]=L,A[95]=L,A[72]=[L,gt],A[104]=[L,gt],A[87]=[L,ft],A[119]=[L,ft];function re(t,n,e){const i=this;let u,r;return l;function l(g){return!mt(g)||!bt(i.previous)||K(i.events)?e(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(g))}function a(g){return mt(g)?(t.consume(g),a):g===64?(t.consume(g),o):e(g)}function o(g){return g===46?t.check(j,m,k)(g):g===45||g===95?t.check(j,e,c)(g):ot(g)?(!r&&ee(g)&&(r=!0),t.consume(g),o):m(g)}function k(g){return t.consume(g),u=!0,r=void 0,o}function c(g){return t.consume(g),p}function p(g){return g===46?t.check(j,e,k)(g):o(g)}function m(g){return u&&!r?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),n(g)):e(g)}}function le(t,n,e){const i=this;return u;function u(l){return l!==87&&l!==119||!pt(i.previous)||K(i.events)?e(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(ne,t.attempt(st,t.attempt(ct,r),e),e)(l))}function r(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),n(l)}}function ue(t,n,e){const i=this;return u;function u(h){return h!==72&&h!==104||!Z(i.previous)||K(i.events)?e(h):(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),t.consume(h),r)}function r(h){return h===84||h===116?(t.consume(h),l):e(h)}function l(h){return h===84||h===116?(t.consume(h),a):e(h)}function a(h){return h===80||h===112?(t.consume(h),o):e(h)}function o(h){return h===83||h===115?(t.consume(h),k):k(h)}function k(h){return h===58?(t.consume(h),c):e(h)}function c(h){return h===47?(t.consume(h),p):e(h)}function p(h){return h===47?(t.consume(h),m):e(h)}function m(h){return h===null||at(h)||v(h)||U(h)?e(h):t.attempt(st,t.attempt(ct,g),e)(h)}function g(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),n(h)}}function oe(t,n,e){return i;function i(o){return t.consume(o),u}function u(o){return o===87||o===119?(t.consume(o),r):e(o)}function r(o){return o===87||o===119?(t.consume(o),l):e(o)}function l(o){return o===46?(t.consume(o),a):e(o)}function a(o){return o===null||y(o)?e(o):n(o)}}function ae(t,n,e){let i,u;return r;function r(o){return o===38?t.check(ht,a,l)(o):o===46||o===95?t.check(j,a,l)(o):o===null||at(o)||v(o)||o!==45&&U(o)?a(o):(t.consume(o),r)}function l(o){return o===46?(u=i,i=void 0,t.consume(o),r):(o===95&&(i=!0),t.consume(o),r)}function a(o){return!u&&!i?n(o):e(o)}}function se(t,n){let e=0;return i;function i(l){return l===38?t.check(ht,n,u)(l):(l===40&&e++,l===41?t.check(j,r,u)(l):G(l)?n(l):kt(l)?t.check(j,n,u)(l):(t.consume(l),i))}function u(l){return t.consume(l),i}function r(l){return e--,e<0?n(l):u(l)}}function ce(t,n,e){return i;function i(l){return t.consume(l),u}function u(l){return ut(l)?(t.consume(l),u):l===59?(t.consume(l),r):e(l)}function r(l){return G(l)?n(l):e(l)}}function he(t,n,e){return i;function i(r){return t.consume(r),u}function u(r){return kt(r)?(t.consume(r),u):G(r)?n(r):e(r)}}function kt(t){return t===33||t===34||t===39||t===41||t===42||t===44||t===46||t===58||t===59||t===60||t===63||t===95||t===126}function G(t){return t===null||t===60||D(t)}function mt(t){return t===43||t===45||t===46||t===95||ot(t)}function pt(t){return t===null||t===40||t===42||t===95||t===126||D(t)}function Z(t){return t===null||!ut(t)}function bt(t){return t!==47&&Z(t)}function K(t){let n=t.length,e=!1;for(;n--;){const i=t[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){e=!0;break}if(i._gfmAutolinkLiteralWalkedInto){e=!1;break}}return t.length>0&&!e&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),e}function Ct(t){if(t===null||D(t)||v(t))return 1;if(U(t))return 2}function fe(t,n,e){const i=[];let u=-1;for(;++u<t.length;){const r=t[u].resolveAll;r&&!i.includes(r)&&(n=r(n,e),i.push(r))}return n}function I(t,n,e,i){const u=i?i-1:Number.POSITIVE_INFINITY;let r=0;return l;function l(o){return E(o)?(t.enter(e),a(o)):n(o)}function a(o){return E(o)&&r++<u?(t.consume(o),a):(t.exit(e),n(o))}}const ge={tokenize:ke,partial:!0};function ke(t,n,e){return I(t,i,"linePrefix");function i(u){return u===null||y(u)?n(u):e(u)}}const Ft=document.createElement("i");function me(t){const n="&"+t+";";Ft.innerHTML=n;const e=Ft.textContent;return e.charCodeAt(e.length-1)===59&&t!=="semi"||e===n?!1:e}function R(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pe={tokenize:Ae,partial:!0};function be(){return{document:{[91]:{tokenize:xe,continuation:{tokenize:de},exit:ye}},text:{[91]:{tokenize:we},[93]:{add:"after",tokenize:Ce,resolveTo:Fe}}}}function Ce(t,n,e){const i=this;let u=i.events.length;const r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;u--;){const o=i.events[u][1];if(o.type==="labelImage"){l=o;break}if(o.type==="gfmFootnoteCall"||o.type==="labelLink"||o.type==="label"||o.type==="image"||o.type==="link")break}return a;function a(o){if(!l||!l._balanced)return e(o);const k=R(i.sliceSerialize({start:l.end,end:i.now()}));return k.charCodeAt(0)!==94||!r.includes(k.slice(1))?e(o):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(o),t.exit("gfmFootnoteCallLabelMarker"),n(o))}}function Fe(t,n){let e=t.length;for(;e--;)if(t[e][1].type==="labelImage"&&t[e][0]==="enter"){t[e][1];break}t[e+1][1].type="data",t[e+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[e+3][1].start),end:Object.assign({},t[t.length-1][1].end)},u={type:"gfmFootnoteCallMarker",start:Object.assign({},t[e+3][1].end),end:Object.assign({},t[e+3][1].end)};u.end.column++,u.end.offset++,u.end._bufferIndex++;const r={type:"gfmFootnoteCallString",start:Object.assign({},u.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},r.start),end:Object.assign({},r.end)},a=[t[e+1],t[e+2],["enter",i,n],t[e+3],t[e+4],["enter",u,n],["exit",u,n],["enter",r,n],["enter",l,n],["exit",l,n],["exit",r,n],t[t.length-2],t[t.length-1],["exit",i,n]];return t.splice(e,t.length-e+1,...a),t}function we(t,n,e){const i=this,u=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r=0,l;return a;function a(m){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),o}function o(m){return m!==94?e(m):(t.enter("gfmFootnoteCallMarker"),t.consume(m),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",k)}function k(m){let g;return m===null||m===91||r++>999?e(m):m===93?l?(t.exit("chunkString"),g=t.exit("gfmFootnoteCallString"),u.includes(R(i.sliceSerialize(g)))?p(m):e(m)):e(m):(t.consume(m),D(m)||(l=!0),m===92?c:k)}function c(m){return m===91||m===92||m===93?(t.consume(m),r++,k):k(m)}function p(m){return t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),n}}function xe(t,n,e){const i=this,u=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r,l=0,a;return o;function o(f){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(f),t.exit("gfmFootnoteDefinitionLabelMarker"),k}function k(f){return f===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(f),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),c):e(f)}function c(f){let b;return f===null||f===91||l>999?e(f):f===93?a?(b=t.exit("gfmFootnoteDefinitionLabelString"),r=R(i.sliceSerialize(b)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(f),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g):e(f):y(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l++,c):(t.enter("chunkString").contentType="string",p(f))}function p(f){return f===null||y(f)||f===91||f===93||l>999?(t.exit("chunkString"),c(f)):(D(f)||(a=!0),l++,t.consume(f),f===92?m:p)}function m(f){return f===91||f===92||f===93?(t.consume(f),l++,p):p(f)}function g(f){return f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),I(t,h,"gfmFootnoteDefinitionWhitespace")):e(f)}function h(f){return u.includes(r)||u.push(r),n(f)}}function de(t,n,e){return t.check(ge,n,t.attempt(pe,n,e))}function ye(t){t.exit("gfmFootnoteDefinition")}function Ae(t,n,e){const i=this;return I(t,u,"gfmFootnoteDefinitionIndent",4+1);function u(r){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?n(r):e(r)}}function De(t={}){let n=t.singleTilde;const e={tokenize:u,resolveAll:i};return n==null&&(n=!0),{text:{[126]:e},insideSpan:{null:[e]},attentionMarkers:{null:[126]}};function i(r,l){let a=-1;for(;++a<r.length;)if(r[a][0]==="enter"&&r[a][1].type==="strikethroughSequenceTemporary"&&r[a][1]._close){let o=a;for(;o--;)if(r[o][0]==="exit"&&r[o][1].type==="strikethroughSequenceTemporary"&&r[o][1]._open&&r[a][1].end.offset-r[a][1].start.offset===r[o][1].end.offset-r[o][1].start.offset){r[a][1].type="strikethroughSequence",r[o][1].type="strikethroughSequence";const k={type:"strikethrough",start:Object.assign({},r[o][1].start),end:Object.assign({},r[a][1].end)},c={type:"strikethroughText",start:Object.assign({},r[o][1].end),end:Object.assign({},r[a][1].start)},p=[["enter",k,l],["enter",r[o][1],l],["exit",r[o][1],l],["enter",c,l]];O(p,p.length,0,fe(l.parser.constructs.insideSpan.null,r.slice(o+1,a),l)),O(p,p.length,0,[["exit",c,l],["enter",r[a][1],l],["exit",r[a][1],l],["exit",k,l]]),O(r,o-1,a-o+3,p),a=o+p.length-2;break}}for(a=-1;++a<r.length;)r[a][1].type==="strikethroughSequenceTemporary"&&(r[a][1].type="data");return r}function u(r,l,a){const o=this.previous,k=this.events;let c=0;return p;function p(g){return o===126&&k[k.length-1][1].type!=="characterEscape"?a(g):(r.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const h=Ct(o);if(g===126)return c>1?a(g):(r.consume(g),c++,m);if(c<2&&!n)return a(g);const f=r.exit("strikethroughSequenceTemporary"),b=Ct(g);return f._open=!b||b===2&&Boolean(h),f._close=!h||h===2&&Boolean(b),l(g)}}}const Ee={flow:{null:{tokenize:Te,resolve:Le}}},wt={tokenize:Se,partial:!0};function Le(t,n){let e=-1,i,u,r,l,a,o,k;for(;++e<t.length;){const c=t[e][1];if(r&&(c.type==="temporaryTableCellContent"&&(l=l||e,a=e),(c.type==="tableCellDivider"||c.type==="tableRow")&&a)){const p={type:"tableContent",start:t[l][1].start,end:t[a][1].end},m={type:"chunkText",start:p.start,end:p.end,contentType:"text"};t.splice(l,a-l+1,["enter",p,n],["enter",m,n],["exit",m,n],["exit",p,n]),e-=a-l-3,l=void 0,a=void 0}if(t[e][0]==="exit"&&o!==void 0&&o+(k?0:1)<e&&(c.type==="tableCellDivider"||c.type==="tableRow"&&(o+3<e||t[o][1].type!=="whitespace"))){const p={type:u?"tableDelimiter":i?"tableHeader":"tableData",start:t[o][1].start,end:t[e][1].end};t.splice(e+(c.type==="tableCellDivider"?1:0),0,["exit",p,n]),t.splice(o,0,["enter",p,n]),e+=2,o=e+1,k=!0}c.type==="tableRow"&&(r=t[e][0]==="enter",r&&(o=e+1,k=!1)),c.type==="tableDelimiterRow"&&(u=t[e][0]==="enter",u&&(o=e+1,k=!1)),c.type==="tableHead"&&(i=t[e][0]==="enter")}return t}function Te(t,n,e){const i=this,u=[];let r=0,l,a;return o;function o(s){return t.enter("table")._align=u,t.enter("tableHead"),t.enter("tableRow"),s===124?k(s):(r++,t.enter("temporaryTableCellContent"),m(s))}function k(s){return t.enter("tableCellDivider"),t.consume(s),t.exit("tableCellDivider"),l=!0,c}function c(s){return s===null||y(s)?h(s):E(s)?(t.enter("whitespace"),t.consume(s),p):(l&&(l=void 0,r++),s===124?k(s):(t.enter("temporaryTableCellContent"),m(s)))}function p(s){return E(s)?(t.consume(s),p):(t.exit("whitespace"),c(s))}function m(s){return s===null||s===124||D(s)?(t.exit("temporaryTableCellContent"),c(s)):(t.consume(s),s===92?g:m)}function g(s){return s===92||s===124?(t.consume(s),m):m(s)}function h(s){if(s===null)return e(s);t.exit("tableRow"),t.exit("tableHead");const V=i.interrupt;return i.interrupt=!0,t.attempt({tokenize:it,partial:!0},function(B){return i.interrupt=V,t.enter("tableDelimiterRow"),f(B)},function(B){return i.interrupt=V,e(B)})(s)}function f(s){return s===null||y(s)?x(s):E(s)?(t.enter("whitespace"),t.consume(s),b):s===45?(t.enter("tableDelimiterFiller"),t.consume(s),a=!0,u.push("none"),F):s===58?(t.enter("tableDelimiterAlignment"),t.consume(s),t.exit("tableDelimiterAlignment"),u.push("left"),C):s===124?(t.enter("tableCellDivider"),t.consume(s),t.exit("tableCellDivider"),f):e(s)}function b(s){return E(s)?(t.consume(s),b):(t.exit("whitespace"),f(s))}function F(s){return s===45?(t.consume(s),F):(t.exit("tableDelimiterFiller"),s===58?(t.enter("tableDelimiterAlignment"),t.consume(s),t.exit("tableDelimiterAlignment"),u[u.length-1]=u[u.length-1]==="left"?"center":"right",w):f(s))}function C(s){return s===45?(t.enter("tableDelimiterFiller"),t.consume(s),a=!0,F):e(s)}function w(s){return s===null||y(s)?x(s):E(s)?(t.enter("whitespace"),t.consume(s),b):s===124?(t.enter("tableCellDivider"),t.consume(s),t.exit("tableCellDivider"),f):e(s)}function x(s){return t.exit("tableDelimiterRow"),!a||r!==u.length?e(s):s===null?T(s):t.check(wt,T,t.attempt({tokenize:it,partial:!0},I(t,d,"linePrefix",4),T))(s)}function T(s){return t.exit("table"),n(s)}function d(s){return t.enter("tableBody"),_t(s)}function _t(s){return t.enter("tableRow"),s===124?Ot(s):(t.enter("temporaryTableCellContent"),H(s))}function Ot(s){return t.enter("tableCellDivider"),t.consume(s),t.exit("tableCellDivider"),et}function et(s){return s===null||y(s)?Nn(s):E(s)?(t.enter("whitespace"),t.consume(s),vt):s===124?Ot(s):(t.enter("temporaryTableCellContent"),H(s))}function vt(s){return E(s)?(t.consume(s),vt):(t.exit("whitespace"),et(s))}function H(s){return s===null||s===124||D(s)?(t.exit("temporaryTableCellContent"),et(s)):(t.consume(s),s===92?Un:H)}function Un(s){return s===92||s===124?(t.consume(s),H):H(s)}function Nn(s){return t.exit("tableRow"),s===null?nt(s):t.check(wt,nt,t.attempt({tokenize:it,partial:!0},I(t,_t,"linePrefix",4),nt))(s)}function nt(s){return t.exit("tableBody"),T(s)}function it(s,V,B){return Vn;function Vn(M){return s.enter("lineEnding"),s.consume(M),s.exit("lineEnding"),I(s,$n,"linePrefix")}function $n(M){if(i.parser.lazy[i.now().line]||M===null||y(M))return B(M);const $=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&$&&$[1].type==="linePrefix"&&$[2].sliceSerialize($[1],!0).length>=4?B(M):(i._gfmTableDynamicInterruptHack=!0,s.check(i.parser.constructs.flow,function(rt){return i._gfmTableDynamicInterruptHack=!1,B(rt)},function(rt){return i._gfmTableDynamicInterruptHack=!1,V(rt)})(M))}}}function Se(t,n,e){let i=0;return u;function u(l){return t.enter("check"),t.consume(l),r}function r(l){return l===-1||l===32?(t.consume(l),i++,i===4?n:r):l===null||D(l)?n(l):e(l)}}const ze={tokenize:Be},Ie={text:{[91]:ze}};function Be(t,n,e){const i=this;return u;function u(a){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?e(a):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),r)}function r(a){return D(a)?(t.enter("taskListCheckValueUnchecked"),t.consume(a),t.exit("taskListCheckValueUnchecked"),l):a===88||a===120?(t.enter("taskListCheckValueChecked"),t.consume(a),t.exit("taskListCheckValueChecked"),l):e(a)}function l(a){return a===93?(t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),t.check({tokenize:Me},n,e)):e(a)}}function Me(t,n,e){const i=this;return I(t,u,"whitespace");function u(r){const l=i.events[i.events.length-1];return(l&&l[1].type==="whitespace"||y(r))&&r!==null?n(r):e(r)}}function je(t){return Yt([ie,be(),De(t),Ee,Ie])}function xt(t,n){const e=String(t);if(typeof n!="string")throw new TypeError("Expected character");let i=0,u=e.indexOf(n);for(;u!==-1;)i++,u=e.indexOf(n,u+n.length);return i}function Pe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const X=function(t){if(t==null)return _e;if(typeof t=="string")return We(t);if(typeof t=="object")return Array.isArray(t)?Re(t):He(t);if(typeof t=="function")return N(t);throw new Error("Expected function, string, or object as test")};function Re(t){const n=[];let e=-1;for(;++e<t.length;)n[e]=X(t[e]);return N(i);function i(...u){let r=-1;for(;++r<n.length;)if(n[r].call(this,...u))return!0;return!1}}function He(t){return N(n);function n(e){let i;for(i in t)if(e[i]!==t[i])return!1;return!0}}function We(t){return N(n);function n(e){return e&&e.type===t}}function N(t){return n;function n(...e){return Boolean(t.call(this,...e))}}function _e(){return!0}function Xn(t){return t}const Oe=!0,ve="skip",dt=!1,Ue=function(t,n,e,i){typeof n=="function"&&typeof e!="function"&&(i=e,e=n,n=null);const u=X(n),r=i?-1:1;l(t,null,[])();function l(a,o,k){const c=typeof a=="object"&&a!==null?a:{};let p;return typeof c.type=="string"&&(p=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(m,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})),m;function m(){let g=[],h,f,b;if((!n||u(a,o,k[k.length-1]||null))&&(g=Ne(e(a,k)),g[0]===dt))return g;if(a.children&&g[0]!==ve)for(f=(i?a.children.length:-1)+r,b=k.concat(a);f>-1&&f<a.children.length;){if(h=l(a.children[f],f,b)(),h[0]===dt)return h;f=typeof h[1]=="number"?h[1]:f+r}return g}}};function Ne(t){return Array.isArray(t)?t:typeof t=="number"?[Oe,t]:[t]}const Ve={}.hasOwnProperty,$e=function(t,n,e,i){let u,r;typeof n=="string"||n instanceof RegExp?(r=[[n,e]],u=i):(r=n,u=e),u||(u={});const l=X(u.ignore||[]),a=qe(r);let o=-1;for(;++o<a.length;)Ue(t,"text",k);return t;function k(p,m){let g=-1,h;for(;++g<m.length;){const f=m[g];if(l(f,h?h.children.indexOf(f):void 0,h))return;h=f}if(h)return c(p,m)}function c(p,m){const g=m[m.length-1],h=a[o][0],f=a[o][1];let b=0;const F=g.children.indexOf(p);let C=[],w;h.lastIndex=0;let x=h.exec(p.value);for(;x;){w=x.index;const T={index:x.index,input:x.input,stack:[...m,p]};let d=f(...x,T);if(typeof d=="string"&&(d=d.length>0?{type:"text",value:d}:void 0),d===!1?w=void 0:(b!==w&&C.push({type:"text",value:p.value.slice(b,w)}),Array.isArray(d)?C.push(...d):d&&C.push(d),b=w+x[0].length),!h.global)break;x=h.exec(p.value)}return w===void 0?C=[p]:(b<p.value.length&&C.push({type:"text",value:p.value.slice(b)}),g.children.splice(F,1,...C)),F+C.length}};function qe(t){const n=[];if(typeof t!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(t)){let e=-1;for(;++e<t.length;)n.push([yt(t[e][0]),At(t[e][1])])}else{let e;for(e in t)Ve.call(t,e)&&n.push([yt(e),At(t[e])])}return n}function yt(t){return typeof t=="string"?new RegExp(Pe(t),"g"):t}function At(t){return typeof t=="function"?t:()=>t}const Y="phrasing",J=["autolink","link","image","label"],Ge={transforms:[tn],enter:{literalAutolink:Ke,literalAutolinkEmail:Q,literalAutolinkHttp:Q,literalAutolinkWww:Q},exit:{literalAutolink:Qe,literalAutolinkEmail:Je,literalAutolinkHttp:Xe,literalAutolinkWww:Ye}},Ze={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Y,notInConstruct:J},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Y,notInConstruct:J},{character:":",before:"[ps]",after:"\\/",inConstruct:Y,notInConstruct:J}]};function Ke(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Q(t){this.config.enter.autolinkProtocol.call(this,t)}function Xe(t){this.config.exit.autolinkProtocol.call(this,t)}function Ye(t){this.config.exit.data.call(this,t);const n=this.stack[this.stack.length-1];n.url="http://"+this.sliceSerialize(t)}function Je(t){this.config.exit.autolinkEmail.call(this,t)}function Qe(t){this.exit(t)}function tn(t){$e(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,en],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,nn]],{ignore:["link","linkReference"]})}function en(t,n,e,i,u){let r="";if(!Dt(u)||(/^w/i.test(n)&&(e=n+e,n="",r="http://"),!rn(e)))return!1;const l=ln(e+i);if(!l[0])return!1;const a={type:"link",title:null,url:r+n+l[0],children:[{type:"text",value:n+l[0]}]};return l[1]?[a,{type:"text",value:l[1]}]:a}function nn(t,n,e,i){return!Dt(i,!0)||/[_-\d]$/.test(e)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+e,children:[{type:"text",value:n+"@"+e}]}}function rn(t){const n=t.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function ln(t){const n=/[!"&'),.:;<>?\]}]+$/.exec(t);let e,i,u,r;if(n)for(t=t.slice(0,n.index),r=n[0],e=r.indexOf(")"),i=xt(t,"("),u=xt(t,")");e!==-1&&i>u;)t+=r.slice(0,e+1),r=r.slice(e+1),e=r.indexOf(")"),u++;return[t,r]}function Dt(t,n){const e=t.input.charCodeAt(t.index-1);return(t.index===0||v(e)||U(e))&&(!n||e!==47)}function un(t,n){const e=Number.parseInt(t,n);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"\uFFFD":String.fromCharCode(e)}const on=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function an(t){return t.replace(on,sn)}function sn(t,n,e){if(n)return n;if(e.charCodeAt(0)===35){const u=e.charCodeAt(1),r=u===120||u===88;return un(e.slice(r?2:1),r?16:10)}return me(e)||t}function Et(t){return t.label||!t.identifier?t.label||"":an(t.identifier)}function S(t){const n=t||{},e=n.now||{};let i=n.lineShift||0,u=e.line||1,r=e.column||1;return{move:o,current:l,shift:a};function l(){return{now:{line:u,column:r},lineShift:i}}function a(k){i+=k}function o(k=""){const c=k.split(/\r?\n|\r/g),p=c[c.length-1];return u+=c.length-1,r=c.length===1?r+p.length:1+p.length+i,k}}function Lt(t,n,e){const i=n.indexStack,u=t.children||[],r=S(e),l=[];let a=-1;for(i.push(-1);++a<u.length;){const k=u[a];i[i.length-1]=a,l.push(r.move(n.handle(k,t,n,{before:`
`,after:`
`,...r.current()}))),k.type!=="list"&&(n.bulletLastUsed=void 0),a<u.length-1&&l.push(r.move(o(k,u[a+1])))}return i.pop(),l.join("");function o(k,c){let p=n.join.length;for(;p--;){const m=n.join[p](k,c,t,n);if(m===!0||m===1)break;if(typeof m=="number")return`
`.repeat(1+m);if(m===!1)return`

<!---->

`}return`

`}}const cn=/\r?\n|\r/g;function Tt(t,n){const e=[];let i=0,u=0,r;for(;r=cn.exec(t);)l(t.slice(i,r.index)),e.push(r[0]),i=r.index+r[0].length,u++;return l(t.slice(i)),e.join("");function l(a){e.push(n(a,u,!a))}}function St(t){if(!t._compiled){const n=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function hn(t,n){return zt(t,n.inConstruct,!0)&&!zt(t,n.notInConstruct,!1)}function zt(t,n,e){if(!n)return e;typeof n=="string"&&(n=[n]);let i=-1;for(;++i<n.length;)if(t.includes(n[i]))return!0;return!1}function It(t,n,e){const i=(e.before||"")+(n||"")+(e.after||""),u=[],r=[],l={};let a=-1;for(;++a<t.unsafe.length;){const c=t.unsafe[a];if(!hn(t.stack,c))continue;const p=St(c);let m;for(;m=p.exec(i);){const g="before"in c||Boolean(c.atBreak),h="after"in c,f=m.index+(g?m[1].length:0);u.includes(f)?(l[f].before&&!g&&(l[f].before=!1),l[f].after&&!h&&(l[f].after=!1)):(u.push(f),l[f]={before:g,after:h})}}u.sort(fn);let o=e.before?e.before.length:0;const k=i.length-(e.after?e.after.length:0);for(a=-1;++a<u.length;){const c=u[a];c<o||c>=k||c+1<k&&u[a+1]===c+1&&l[c].after&&!l[c+1].before&&!l[c+1].after||u[a-1]===c-1&&l[c].before&&!l[c-1].before&&!l[c-1].after||(o!==c&&r.push(Bt(i.slice(o,c),"\\")),o=c,/[!-/:-@[-`{-~]/.test(i.charAt(c))&&(!e.encode||!e.encode.includes(i.charAt(c)))?r.push("\\"):(r.push("&#x"+i.charCodeAt(c).toString(16).toUpperCase()+";"),o++))}return r.push(Bt(i.slice(o,k),e.after)),r.join("")}function fn(t,n){return t-n}function Bt(t,n){const e=/\\(?=[!-/:-@[-`{-~])/g,i=[],u=[],r=t+n;let l=-1,a=0,o;for(;o=e.exec(r);)i.push(o.index);for(;++l<i.length;)a!==i[l]&&u.push(t.slice(a,i[l])),u.push("\\"),a=i[l];return u.push(t.slice(a)),u.join("")}function gn(){return{enter:{gfmFootnoteDefinition:t,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:u,gfmFootnoteCallString:r},exit:{gfmFootnoteDefinition:i,gfmFootnoteDefinitionLabelString:e,gfmFootnoteCall:a,gfmFootnoteCallString:l}};function t(o){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},o)}function n(){this.buffer()}function e(o){const k=this.resume(),c=this.stack[this.stack.length-1];c.label=k,c.identifier=R(this.sliceSerialize(o)).toLowerCase()}function i(o){this.exit(o)}function u(o){this.enter({type:"footnoteReference",identifier:"",label:""},o)}function r(){this.buffer()}function l(o){const k=this.resume(),c=this.stack[this.stack.length-1];c.label=k,c.identifier=R(this.sliceSerialize(o)).toLowerCase()}function a(o){this.exit(o)}}function kn(){return t.peek=n,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:e,footnoteReference:t}};function t(i,u,r,l){const a=S(l);let o=a.move("[^");const k=r.enter("footnoteReference"),c=r.enter("reference");return o+=a.move(It(r,Et(i),{...a.current(),before:o,after:"]"})),c(),k(),o+=a.move("]"),o}function n(){return"["}function e(i,u,r,l){const a=S(l);let o=a.move("[^");const k=r.enter("footnoteDefinition"),c=r.enter("label");return o+=a.move(It(r,Et(i),{...a.current(),before:o,after:"]"})),c(),o+=a.move("]:"+(i.children&&i.children.length>0?" ":"")),a.shift(4),o+=a.move(Tt(Lt(i,r,a.current()),p)),k(),o;function p(m,g,h){return g?(h?"":"    ")+m:m}}}function Mt(t,n,e){const i=n.indexStack,u=t.children||[],r=[];let l=-1,a=e.before;i.push(-1);let o=S(e);for(;++l<u.length;){const k=u[l];let c;if(i[i.length-1]=l,l+1<u.length){let p=n.handle.handlers[u[l+1].type];p&&p.peek&&(p=p.peek),c=p?p(u[l+1],t,n,{before:"",after:"",...o.current()}).charAt(0):""}else c=e.after;r.length>0&&(a==="\r"||a===`
`)&&k.type==="html"&&(r[r.length-1]=r[r.length-1].replace(/(\r?\n|\r)$/," "),a=" ",o=S(e),o.move(r.join(""))),r.push(o.move(n.handle(k,t,n,{...o.current(),before:a,after:c}))),a=r[r.length-1].slice(-1)}return i.pop(),r.join("")}const mn={canContainEols:["delete"],enter:{strikethrough:bn},exit:{strikethrough:Cn}},pn={unsafe:[{character:"~",inConstruct:"phrasing"}],handlers:{delete:jt}};jt.peek=Fn;function bn(t){this.enter({type:"delete",children:[]},t)}function Cn(t){this.exit(t)}function jt(t,n,e,i){const u=S(i),r=e.enter("emphasis");let l=u.move("~~");return l+=Mt(t,e,{...u.current(),before:l,after:"~"}),l+=u.move("~~"),r(),l}function Fn(){return"~"}Pt.peek=wn;function Pt(t,n,e){let i=t.value||"",u="`",r=-1;for(;new RegExp("(^|[^`])"+u+"([^`]|$)").test(i);)u+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++r<e.unsafe.length;){const l=e.unsafe[r],a=St(l);let o;if(!!l.atBreak)for(;o=a.exec(i);){let k=o.index;i.charCodeAt(k)===10&&i.charCodeAt(k-1)===13&&k--,i=i.slice(0,k)+" "+i.slice(o.index+1)}}return u+i+u}function wn(){return"`"}function xn(t,n={}){const e=(n.align||[]).concat(),i=n.stringLength||yn,u=[],r=[],l=[],a=[];let o=0,k=-1;for(;++k<t.length;){const h=[],f=[];let b=-1;for(t[k].length>o&&(o=t[k].length);++b<t[k].length;){const F=dn(t[k][b]);if(n.alignDelimiters!==!1){const C=i(F);f[b]=C,(a[b]===void 0||C>a[b])&&(a[b]=C)}h.push(F)}r[k]=h,l[k]=f}let c=-1;if(typeof e=="object"&&"length"in e)for(;++c<o;)u[c]=Rt(e[c]);else{const h=Rt(e);for(;++c<o;)u[c]=h}c=-1;const p=[],m=[];for(;++c<o;){const h=u[c];let f="",b="";h===99?(f=":",b=":"):h===108?f=":":h===114&&(b=":");let F=n.alignDelimiters===!1?1:Math.max(1,a[c]-f.length-b.length);const C=f+"-".repeat(F)+b;n.alignDelimiters!==!1&&(F=f.length+F+b.length,F>a[c]&&(a[c]=F),m[c]=F),p[c]=C}r.splice(1,0,p),l.splice(1,0,m),k=-1;const g=[];for(;++k<r.length;){const h=r[k],f=l[k];c=-1;const b=[];for(;++c<o;){const F=h[c]||"";let C="",w="";if(n.alignDelimiters!==!1){const x=a[c]-(f[c]||0),T=u[c];T===114?C=" ".repeat(x):T===99?x%2?(C=" ".repeat(x/2+.5),w=" ".repeat(x/2-.5)):(C=" ".repeat(x/2),w=C):w=" ".repeat(x)}n.delimiterStart!==!1&&!c&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&F==="")&&(n.delimiterStart!==!1||c)&&b.push(" "),n.alignDelimiters!==!1&&b.push(C),b.push(F),n.alignDelimiters!==!1&&b.push(w),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||c!==o-1)&&b.push("|")}g.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return g.join(`
`)}function dn(t){return t==null?"":String(t)}function yn(t){return t.length}function Rt(t){const n=typeof t=="string"?t.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}const An={enter:{table:Dn,tableData:Ht,tableHeader:Ht,tableRow:Ln},exit:{codeText:Tn,table:En,tableData:tt,tableHeader:tt,tableRow:tt}};function Dn(t){const n=t._align;this.enter({type:"table",align:n.map(e=>e==="none"?null:e),children:[]},t),this.setData("inTable",!0)}function En(t){this.exit(t),this.setData("inTable")}function Ln(t){this.enter({type:"tableRow",children:[]},t)}function tt(t){this.exit(t)}function Ht(t){this.enter({type:"tableCell",children:[]},t)}function Tn(t){let n=this.resume();this.getData("inTable")&&(n=n.replace(/\\([\\|])/g,Sn));const e=this.stack[this.stack.length-1];e.value=n,this.exit(t)}function Sn(t,n){return n==="|"?n:t}function zn(t){const n=t||{},e=n.tableCellPadding,i=n.tablePipeAlign,u=n.stringLength,r=e?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:l,tableRow:a,tableCell:o,inlineCode:m}};function l(g,h,f,b){return k(c(g,f,b),g.align)}function a(g,h,f,b){const F=p(g,f,b),C=k([F]);return C.slice(0,C.indexOf(`
`))}function o(g,h,f,b){const F=f.enter("tableCell"),C=f.enter("phrasing"),w=Mt(g,f,{...b,before:r,after:r});return C(),F(),w}function k(g,h){return xn(g,{align:h,alignDelimiters:i,padding:e,stringLength:u})}function c(g,h,f){const b=g.children;let F=-1;const C=[],w=h.enter("table");for(;++F<b.length;)C[F]=p(b[F],h,f);return w(),C}function p(g,h,f){const b=g.children;let F=-1;const C=[],w=h.enter("tableRow");for(;++F<b.length;)C[F]=o(b[F],g,h,f);return w(),C}function m(g,h,f){let b=Pt(g,h,f);return f.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function In(t){const n=t.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function Bn(t){const n=t.options.listItemIndent||"tab";if(n===1||n==="1")return"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function Mn(t,n,e,i){const u=Bn(e);let r=e.bulletCurrent||In(e);n&&n.type==="list"&&n.ordered&&(r=(typeof n.start=="number"&&n.start>-1?n.start:1)+(e.options.incrementListMarker===!1?0:n.children.indexOf(t))+r);let l=r.length+1;(u==="tab"||u==="mixed"&&(n&&n.type==="list"&&n.spread||t.spread))&&(l=Math.ceil(l/4)*4);const a=S(i);a.move(r+" ".repeat(l-r.length)),a.shift(l);const o=e.enter("listItem"),k=Tt(Lt(t,e,a.current()),c);return o(),k;function c(p,m,g){return m?(g?"":" ".repeat(l))+p:(g?r:r+" ".repeat(l-r.length))+p}}const jn={exit:{taskListCheckValueChecked:Wt,taskListCheckValueUnchecked:Wt,paragraph:Rn}},Pn={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Hn}};function Wt(t){const n=this.stack[this.stack.length-2];n.checked=t.type==="taskListCheckValueChecked"}function Rn(t){const n=this.stack[this.stack.length-2],e=this.stack[this.stack.length-1],i=n.children,u=e.children[0];let r=-1,l;if(n&&n.type==="listItem"&&typeof n.checked=="boolean"&&u&&u.type==="text"){for(;++r<i.length;){const a=i[r];if(a.type==="paragraph"){l=a;break}}l===e&&(u.value=u.value.slice(1),u.value.length===0?e.children.shift():e.position&&u.position&&typeof u.position.start.offset=="number"&&(u.position.start.column++,u.position.start.offset++,e.position.start=Object.assign({},u.position.start)))}this.exit(t)}function Hn(t,n,e,i){const u=t.children[0],r=typeof t.checked=="boolean"&&u&&u.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",a=S(i);r&&a.move(l);let o=Mn(t,n,e,{...i,...a.current()});return r&&(o=o.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,k)),o;function k(c){return c+l}}function Wn(){return[Ge,gn(),mn,An,jn]}function _n(t){return{extensions:[Ze,kn(),pn,zn(t),Pn]}}function On(t={}){const n=this.data();e("micromarkExtensions",je(t)),e("fromMarkdownExtensions",Wn()),e("toMarkdownExtensions",_n(t));function e(i,u){(n[i]?n[i]:n[i]=[]).push(u)}}function vn({locale:t,...n}={}){const e={...Ut,...t};return{remark:i=>i.use(On,n),actions:[{title:e.strike,icon:Xt({}),cheatsheet:`~~${e.strikeText}~~`,handler:{type:"action",click({wrapText:i,editor:u}){i("~~"),u.focus()}}},{title:e.task,icon:Zt({}),cheatsheet:`- [ ] ${e.taskText}`,handler:{type:"action",click({replaceLines:i,editor:u}){i(r=>"- [ ] "+r),u.focus()}}},{title:e.table,icon:Kt({}),handler:{type:"action",click({editor:i,appendBlock:u,codemirror:r}){const{line:l}=u(`| ${e.tableHeading} |  |
| --- | --- |
|  |  |
`);i.setSelection(r.Pos(l,2),r.Pos(l,2+e.tableHeading.length)),i.focus()}}}]}}return vn});
